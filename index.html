<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Harbinger project</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <style>
        html, body, .container-table {
            height: 100%;
        }
        .container-table {
            display: table;
            height: calc(100% - 2cm);
        }
        .vertical-center-row {
            display: table-cell;
            vertical-align: middle;
        }
        .panel-body {
            background-color: #f2f2f2;
            box-shadow: 5px 5px 5px grey;
        }
        footer {
            height: 2cm;
        }
    </style>
</head>
<body>
<div class="container container-table">
    <div class="row vertical-center-row">
        <div class="text-center col-md-4 col-md-offset-4" >
            <div class="panel panel-default">
                <div class="panel-body">
                    <h1 class="text-center">Прогноз курса</h1>
                    <h4><small>украинской гривны к доллару США<br/>на <span id="date">-</span></small></h4>
                    <h1 class="text-center">Покупка <span id="buy">-</span></h1>
                    <h1 class="text-center">Продажа <span id="sale">-</span></h1>
                </div>
            </div>
        </div>
    </div>
</div>
<footer>
    <p class="text-center">
        Прогноз строится на основе анализа сообщений пользователей социальной сети <a href="https://twitter.com">Twitter</a> с помощью глубокой рекуррентной нейронной сети.
    </p>
    <p class="text-center">Автор <a href="http://stebaev.com">Дмитрий Стебаев</a></p>
</footer>

<script>
    $(document).ready(function() {
        function formatTimestamp(timestamp) {
            var d = new Date(timestamp);
            var date = [ d.getDate(), d.getMonth() + 1, d.getFullYear() ];
            var time = [ d.getHours(), d.getMinutes() ];

            for ( var i = 1; i < 2; i++ ) {
                if ( time[i] < 10 ) {
                    time[i] = "0" + time[i];
                }
            }

            if (date[1] < 10) {
                date[1] = "0" + date[1]
            }

            return date.join(".") + " " + time.join(":");
        }
        var updateFunction = function () {
            $.getJSON("https://dl.dropboxusercontent.com/s/3ffvr336rvum45p/prediction.json", function(json) {
                var buy = parseFloat(json.buy)
                var sale = parseFloat(json.sale)
                $("#buy").text(buy.toFixed(2))
                $("#sale").text(sale.toFixed(2))
                $("#date").text(formatTimestamp(json.timestamp * 1000))
                console.log('Exchange rates were updated')
            })
        }
        updateFunction()
        setInterval(updateFunction, 60 * 1000)
    });
</script>

</body>
</html>